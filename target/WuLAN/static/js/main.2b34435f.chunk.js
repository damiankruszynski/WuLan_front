(this.webpackJsonpWuLAN=this.webpackJsonpWuLAN||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),s=n.n(c),o=(n(57),n(58),n(52)),i=n(6),l=(n(59),n(114)),u=n(115),j=n(2);var b=function(e){return Object(j.jsx)(l.a,{fixed:"bottom",children:Object(j.jsx)(u.a,{className:"nav-item m-auto",children:"All Rights Reserved 2020 @DK"})})},d=n(14),f=n(18),h=n(19),m=n(26),O=n.n(m),g=new(function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,[{key:"getAUTH_API_BASE_URL",value:function(){return"http://"+window.location.hostname+":8080/wulan_back/"}}]),e}()),x=new(function(){function e(){Object(f.a)(this,e),this.getCurrentUser=function(){return JSON.parse(localStorage.getItem("user"))}}return Object(h.a)(e,[{key:"logIn",value:function(e){return O.a.post(g.getAUTH_API_BASE_URL()+"login",e).then((function(e){e.data.token&&localStorage.setItem("user",JSON.stringify(e.data))}))}}]),e}());var p=function(e){var t=Object(a.useState)(""),n=Object(d.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),o=Object(d.a)(s,2),i=o[0],l=o[1],u=Object(a.useState)(null),b=Object(d.a)(u,2),f=b[0],h=b[1];function m(){if(""!==r&&""!==i){var t={username:r,password:i};x.logIn(t).then((function(){e.history.push("/home"),window.location.reload()}),(function(e){-1!==e.message.indexOf("Network Error")?(h("Serwer nie odpowiada!"),console.log(e.message)):(h("B\u0142\u0119dne dane logowania!"),console.log(e.message))}))}}return Object(a.useEffect)((function(){null!==localStorage.getItem("username")&&c(localStorage.getItem("username")),null!==localStorage.getItem("password")&&l(localStorage.getItem("password"))}),[]),Object(a.useEffect)((function(){null!==localStorage.getItem("user")&&m()})),Object(j.jsx)("div",{className:"App",children:Object(j.jsx)("header",{className:"App-header",children:Object(j.jsx)("form",{className:"form-signin",children:Object(j.jsxs)("div",{className:"d-sm-flex flex-sm-column",children:[Object(j.jsx)("label",{htmlFor:"username",className:"flex-sm-row",children:"Login"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"username",id:"username",className:"flex-sm-row",value:r,onChange:function(e){c(e.target.value),localStorage.setItem("username",e.target.value)},placeholder:"Login",required:!0,autoFocus:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("label",{htmlFor:"password",className:"flex-sm-row",children:"Has\u0142o"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"password",id:"password",className:"flex-sm-row",placeholder:"Has\u0142o",value:i,onChange:function(e){l(e.target.value),localStorage.setItem("password",e.target.value)},required:!0}),Object(j.jsx)("div",{children:f?Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("div",{className:"alert alert-danger",role:"alert",children:f})}):null}),Object(j.jsx)("button",{className:"btn-primary mt-4",type:"submit",onClick:function(e){e.preventDefault(),m()},children:"Zaloguj"})]})})})})};var v=function(e){return Object(j.jsxs)("div",{children:[Object(j.jsx)(p,{history:e.history}),Object(j.jsx)(b,{})]})},w=n(21),y=n.n(w),S=n(27),N=n(110),A=n(116);var k=function(e){var t=e.file,n=e.onClickFile,a=[],r="file-looks-"+t.fileType;return a.push(Object(j.jsx)(N.a,{xs:"auto",className:"col-content",children:Object(j.jsx)(A.a,{onClick:n,className:r,id:t.filePath,children:Object(j.jsx)(A.a.Body,{children:Object(j.jsx)(A.a.Title,{style:{color:"black"},children:t.fileName})})})},t.fileName)),a},I=n(111),P=n(112);var L=function(e){return Object(j.jsx)(I.a,{xs:"auto",className:"justify-content-center align-items-center",children:Object(j.jsx)(P.a,{animation:"grow",size:"sm"})})};function _(e){return void 0===e.body&&0===e.body.length?null:Object(j.jsx)(I.a,{xs:"auto",className:"justify-content-center align-items-center",children:e.body})}function C(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{Authorization:"Bearer "+e.token}:{}}var U=new(function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,[{key:"getFileList",value:function(){var e=Object(S.a)(y.a.mark((function e(t){var n,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:C(),params:{path:t}},a=function(){return O.a.get(g.getAUTH_API_BASE_URL()+"files",n)},e.next=4,a();case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),E=n(50),F=n.n(E);var T=function(e){var t=new URL(g.getAUTH_API_BASE_URL()+"stream");t.searchParams.set("filePath",e.file.filePath);var n=new URL(g.getAUTH_API_BASE_URL()+"stream");return n.searchParams.set("filePath",e.file.subPath),Object(j.jsx)("div",{children:Object(j.jsx)(F.a,{url:t,controls:!0,width:"100%",height:"100%",config:{file:{attributes:{crossOrigin:"true"},tracks:[{kind:"subtitles",src:n.toString(),label:"W\u0142\u0105czone",default:!0}]}}})})},B=n(113);function R(e){return Object(j.jsx)("div",{children:Object(j.jsx)(B.a,{onClick:function(){localStorage.removeItem("user"),e.history.push("/login"),window.location.reload()},children:"Wyloguj"})})}var H=function(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)([]),o=Object(d.a)(s,2),i=o[0],l=o[1],u=Object(a.useState)(""),b=Object(d.a)(u,2),f=b[0],h=b[1],m=Object(a.useState)(null),O=Object(d.a)(m,2),g=O[0],x=O[1];function p(e){return v.apply(this,arguments)}function v(){return(v=Object(S.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.getFileList(t);case 2:n=e.sent,c(n),h(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){var t=e.currentTarget.id;!function(e){var t=i;t.push(e),l(t)}(f),function(e){return-1!==e.toUpperCase().indexOf("MP4")&&(r.forEach((function(t){t.filePath===e&&x(t)})),!0)}(t)||p(t)}Object(a.useEffect)((function(){p(f)}),[]);var N=[];void 0!==r&&0!==r.length&&Array.from(r).forEach((function(e){N.push(Object(j.jsx)(k,{file:e,onClickFile:w},e.filePath))}));var A=Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("button",{className:"btn-info",onClick:function(){return p((x(null),0===i.length?"":i.pop()))},children:"WSTECZ"})});return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)("div",{className:"App-header",children:[Object(j.jsx)(_,{body:Object(j.jsx)(R,{history:e.history})})," ",Object(j.jsx)("div",{style:{padding:30}}),Object(j.jsxs)("div",{className:"container-fluid ",children:[Object(j.jsx)(_,{body:A}),Object(j.jsx)("p",{}),Object(j.jsx)("div",{children:Object(j.jsx)(_,{body:g?Object(j.jsx)(T,{file:g}):0!==N.length?N:Object(j.jsx)(L,{})})})]})]})})};var W=function(){return Object(j.jsx)(o.a,{basename:"/WuLAN",children:Object(j.jsxs)(i.c,{children:[Object(j.jsx)(i.a,{exact:!0,path:"/",component:v}),Object(j.jsx)(i.a,{path:"/login",component:v}),Object(j.jsx)(i.a,{path:"/home",component:H})]})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,117)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(W,{})}),document.getElementById("root")),J()},57:function(e,t,n){},58:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.2b34435f.chunk.js.map